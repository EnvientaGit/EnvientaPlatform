@extends('00_header.platform')

@section('content')
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="" style="height: 150px;"></div>

        <div class="row mb-5">
          <div class="col-md-12">
            <h2>Ready to buy products</h2>
            <p class="text-dark">
              Simply just click on the <b class="_clr">Buy now</b> button and select the Makerspace
            </p>
          </div>
        </div>

        <!-- Cards -->
        <div class="row">

          <div class="col-md-4 my-3">
            <div class="card border border-secondary" style="height: 33rem;">
              <div class="">
                <a href="http://platform.envienta.org/project/modular-3d-printed-desk-led-lamp-easy-to-print-5b911e7705e95" target="_blank">
                  <img class="env_card_img_h card-img-top img-fluid" height="60" src="img/desk_lamp.jpg" alt="Card image cap">
                </a>
              </div>
              <div class="card-body">
                <h5 class="card-title">Modular 3D printed DESK LED LAMP</h5>
                <p class="card-text text-justify">
                  Make brightness in your room or office - cheap, easy to print, biodegradable from PLA, and only 4 watts :))
                </p>
              </div>
              <div class="card-footer text-center">
                <h5 class="float-left my-2">30 USD</h5>
                <!-- Button trigger modal -->
                <a href="#" class="btn btn-primary float-right buy" data-toggle="modal" data-target="#exampleModalCenter" data-product="modular-3d-printed-desk-led-lamp-easy-to-print-5b911e7705e95" data-product-name="Modular 3D printed DESK LED LAMP">
                  Buy now
                </a>
              </div>
            </div>
          </div>

          <div class="col-md-4 my-3">
            <div class="card border border-secondary" style="height: 33rem;">
              <div class="">
                <a href="http://platform.envienta.org/project/3d-chair-5b44db3bc3de3" target="_blank">
                  <img class="env_card_img_h card-img-top img-fluid" height="60" src="img/chair.jpg" alt="Card image cap">
                </a>
              </div>
              <div class="card-body">
                <h5 class="card-title">3D printed chair</h5>
                <p class="card-text text-justify">
                  This is a chair everyone with a printer and some nGen_FLEX filament can make at home!
                </p>
              </div>
              <div class="card-footer text-center">
                <h5 class="float-left my-2">89 USD</h5>
                <!-- Button trigger modal -->
                <a href="#" class="btn btn-primary float-right buy" data-toggle="modal" data-target="#exampleModalCenter" data-product="3d-chair-5b44db3bc3de3" data-product-name="3D printed chair">
                  Buy now
                </a>
              </div>
            </div>
          </div>

          <div class="col-md-4 my-3">
            <div class="card border border-secondary" style="height: 33rem;">
              <div class="">
                <a href="http://platform.envienta.org/project/house-cooling-with-a-used-car-heat-exchanger-5b3b50cb5d920" target="_blank">
                  <img class="env_card_img_h card-img-top img-fluid" height="60" src="img/cooler.jpg" alt="Card image cap">
                </a>
              </div>
              <div class="card-body">
                <h5 class="card-title">House cooling with a used car heat exchanger</h5>
                <p class="card-text text-justify">
                  More and more households are using air conditioning system. But this way is not going to be sustainable in the future.
                </p>
              </div>
              <div class="card-footer text-center">
                <h5 class="float-left my-2">90 USD</h5>
                <!-- Button trigger modal -->
                <a href="#" class="btn btn-primary float-right buy" data-toggle="modal" data-target="#exampleModalCenter" data-product="house-cooling-with-a-used-car-heat-exchanger-5b3b50cb5d920" data-product-name="House cooling with a used car heat exchanger">
                  Buy now
                </a>
              </div>
            </div>
          </div>

          <div class="" style="height: 500px;"></div>

          <div class="col-md-4 my-3">
            <div class="card border border-secondary" style="height: 33rem;">
              <div class="">
                <a href="http://platform.envienta.org/project/diy-pallet-furniture-with-3d-printed-glass-holder-phone-stand-5b70afe2aca41" target="_blank">
                  <img class="env_card_img_h card-img-top img-fluid" height="60" src="img/furniture.jpg" alt="Card image cap">
                </a>
              </div>
              <div class="card-body">
                <h5 class="card-title">DIY pallet furniture with 3D printed glass holder & phone stand</h5>
                <p class="card-text text-justify">
                  Garden furnitures are very expensive today, but you can easily make your own furniture from pallets. This solution is very cheap and unique with these 3d printed glass holder and phone stands.
                </p>
              </div>
              <div class="card-footer text-center">
                <h5 class="float-left my-2">175 USD</h5>
                <!-- Button trigger modal -->
                <a href="#" class="btn btn-primary float-right buy" data-toggle="modal" data-target="#exampleModalCenter" data-product="diy-pallet-furniture-with-3d-printed-glass-holder-phone-stand-5b70afe2aca41" data-product-name="DIY pallet furniture with 3D printed glass holder & phone stand">
                  Buy now
                </a>
              </div>
            </div>
          </div>

          <div class="col-md-4 my-3">
            <div class="card border border-secondary" style="height: 33rem;">
              <div class="">
                <a href="http://platform.envienta.org/project/automatic-watering-system-5b71787b52008" target="_blank">
                  <img class="env_card_img_h card-img-top img-fluid" height="60" src="img/watering_system.png" alt="Card image cap">
                </a>
              </div>
              <div class="card-body">
                <h5 class="card-title">Automatic watering system</h5>
                <p class="card-text text-justify">
                  It's a simple aplication to watering flowers at home.
                </p>
              </div>
              <div class="card-footer text-center">
                <h5 class="float-left my-2">75 USD</h5>
                <!-- Button trigger modal -->
                <a href="#" class="btn btn-primary float-right buy" data-toggle="modal" data-target="#exampleModalCenter" data-product="automatic-watering-system-5b71787b52008" data-product-name="Automatic watering system">
                  Buy now
                </a>
              </div>
            </div>
          </div>

          <div class="col-md-4 my-3">
            <div class="card border border-secondary" style="height: 33rem;">
              <div class="">
                <a href="http://platform.envienta.org/project/3d-printed-mosquito-trap-5b4608b328c67" target="_blank">
                  <img class="env_card_img_h card-img-top img-fluid" height="60" src="img/mosq_trap.jpg" alt="Card image cap">
                </a>
              </div>
              <div class="card-body">
                <h5 class="card-title">3D printed - Mosquito trap</h5>
                <p class="card-text text-justify">
                  Non-toxic biodegradable mosquito trap. Printed from PLA, works without any propellant.
                </p>
              </div>
              <div class="card-footer text-center">
                <h5 class="float-left my-2">30 USD</h5>
                <!-- Button trigger modal -->
                <a href="#" class="btn btn-primary float-right buy" data-toggle="modal" data-target="#exampleModalCenter" data-product="3d-printed-mosquito-trap-5b4608b328c67" data-product-name="3D printed - Mosquito trap">
                  Buy now
                </a>
              </div>
            </div>
          </div>
        </div><!-- end of the row -->

      </div><!-- end of the col-md-12 -->

    </div><!-- end of the row -->
    <div class="" style="height: 150px;"></div>

  </div><!-- end of the container -->

  <div class="container">
    <div class="row">
      <div class="col-md-12">

        <!-- Modal -->
        <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered" role="document" style="max-width: 600px;">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Choose a <b class="_clr">Makerspace</b></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body pb-0 _scroll">

                @if(!Auth::check())
                <!-- Sign In part -->
                <div class="card w-100 border border-secondary mb-3">
                  <div class="card-header text-truncat text-center">
                    <h4 class="card-title text-truncate ">Not signed in
                      <i class="fa fa-frown-o" aria-hidden="true"></i>
                    </h4>
                    <p class="card-text mb-0 text-truncat">
                      You have not yet signed in.
                    </p>
                  </div>
                  <div class="card-body">
                    <p class="card-text text-center">
                      You have to <b class="_clr">Sign in</b> to able to buy in the Shop
                    </p>
                  </div>
                  <div class="card-footer text-center">
                    <a href="#" class="btn btn-primary" data-toggle="modal" data-target="#login_dialog" data-dismiss="modal">Sign in / Sign up</a>
                  </div>
                </div><!-- End of the Sign In part -->
                @elseif(!Auth::user()->isCustomer)

                <!-- "fill out profile" part -->
                <div class="card w-100 border border-secondary mb-3">
                  <div class="card-header text-truncat text-center">
                    <h4 class="card-title text-truncate ">Customer profile missing
                    </h4>
                    <p class="card-text mb-0 text-truncat">
                      You have not yet filled out your Customer Profile.
                    </p>
                  </div>
                  <div class="card-body">
                    <p class="card-text text-center">
                      You have to fill out the customer part of your <b class="_clr">Profile</b> to able to buy in the Shop
                    </p>
                  </div>
                  <div class="card-footer text-center">
                    <a href="{{ URL::to('/profile') }}" class="btn btn-primary">Go to profile</a>
                  </div>
                </div><!-- End of the "fill out profile" part -->
                @else

                <!-- Makerspace card/part -->
                <div class="card w-100 border border-secondary mb-3">
                  <div class="card-header">
                    <div class="float-left mr-3">
                      <img class="card-img-top img-fluid img-thumbnail rounded" style="width: 150px;" src="img/kollabor.jpg" alt="Card image cap">
                    </div>
                    <h5 class="card-title text-truncate">Kollabor</h5>
                    <p class="card-text mb-0 text-truncat">Békéscsaba, Kiss Ernő u. 3, 5600 Hungary</p>
                    <p class="card-text mb-0 text-truncat">+36 70 315 0797</p>
                    <p class="card-text mb-0 text-truncat">hello@kollabor.hu</p>
                  </div>
                  <div class="card-body">
                    <p class="card-text text-justify">
                      KOLLABOR, the natural science experimental center and common creative place in Békéscsaba (Hungary). KOLLABOR is supported by ENVIENTA and is the first place where ENV tokens will be tested.
                    </p>
                  </div>
                  <div class="card-footer">
                    <!--<h5 class="float-left my-2">Price_here</h5>-->
                    <a href="#" class="btn btn-primary float-right" id="order_button" data-dismiss="modal">Order/buy</a>
                  </div>
                </div><!-- End of the Makerspace card/part -->
                @endif

              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
              </div>
            </div>
          </div>
        </div><!-- End of the modal -->

        <!-- Verification Modal -->
        <div class="modal fade" id="orderDonePopup" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalCenterTitle">Your order
                  <i class="fa fa-envelope-o _clr" aria-hidden="true"></i>
                </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <div class="card-header text-truncat text-center">
                  <h5 class="card-title">Your email has been sent successfully
                    <i class="fa fa-check _clr" aria-hidden="true"></i>
                  </h5>
                </div>
                <div class="card-body text-center">
                  <p class="card-text">
                    The selected makerspace will respond soon
                  </p>
                  <h5>Thank you for your order!
                    <i class="fa fa-smile-o _clr" aria-hidden="true"></i>
                  </h5>
                  <small>(Please note that it may take time because of the occupancy)</small>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

<script type="text/javascript">
  $('.buy').click(function() {
    var product = $(this).attr('data-product');
    $('#order_button').attr('data-product-url', 'http://platform.envienta.org/project/' + product);    
    $('#order_button').attr('data-product-name', $(this).attr('data-product-name'));
  });

  $('#order_button').click(function() {
    var productUrl = $('#order_button').attr('data-product-url');
    var productName = $('#order_button').attr('data-product-name');
    $.get("/shop/sendOrder", {productName: productName, productUrl: productUrl}).done(function() {
      $("#orderDonePopup").modal()
    });
  });
</script>
@endsection